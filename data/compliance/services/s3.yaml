# AWS S3 Best Practices
service: S3
description: Amazon Simple Storage Service best practices

practices:
  - category: security
    title: "Enable bucket encryption"
    description: "Use server-side encryption to protect data at rest in S3 buckets"
    compliance_frameworks:
      - "CIS"
      - "PCI-DSS"
      - "HIPAA"
    implementation: "Enable default encryption on S3 buckets using AES-256 or AWS KMS"
    terraform_example: |
      resource "aws_s3_bucket_server_side_encryption_configuration" "example" {
        bucket = aws_s3_bucket.example.id

        rule {
          apply_server_side_encryption_by_default {
            sse_algorithm = "AES256"
          }
        }
      }
    cli_example: |
      aws s3api put-bucket-encryption \
        --bucket my-bucket \
        --server-side-encryption-configuration '{
          "Rules": [{
            "ApplyServerSideEncryptionByDefault": {
              "SSEAlgorithm": "AES256"
            }
          }]
        }'
    console_steps:
      - "Navigate to S3 in AWS Console"
      - "Select the bucket"
      - "Go to Properties tab"
      - "Find Default encryption section"
      - "Click Edit and enable encryption"
      - "Choose AES-256 or AWS-KMS"
      - "Save changes"

  - category: security
    title: "Block public access"
    description: "Configure S3 Block Public Access settings to prevent accidental public exposure"
    compliance_frameworks:
      - "CIS"
      - "NIST"
    implementation: "Enable S3 Block Public Access at the account and bucket level"
    terraform_example: |
      resource "aws_s3_bucket_public_access_block" "example" {
        bucket = aws_s3_bucket.example.id

        block_public_acls       = true
        block_public_policy     = true
        ignore_public_acls      = true
        restrict_public_buckets = true
      }
    cli_example: |
      aws s3api put-public-access-block \
        --bucket my-bucket \
        --public-access-block-configuration \
        "BlockPublicAcls=true,IgnorePublicAcls=true,BlockPublicPolicy=true,RestrictPublicBuckets=true"
    console_steps:
      - "Navigate to S3 in AWS Console"
      - "Select the bucket"
      - "Go to Permissions tab"
      - "Find Block public access section"
      - "Click Edit"
      - "Enable all four settings"
      - "Save changes"

  - category: cost
    title: "Enable S3 Intelligent-Tiering"
    description: "Use S3 Intelligent-Tiering to automatically move objects between access tiers"
    compliance_frameworks: []
    implementation: "Configure S3 Intelligent-Tiering for cost optimization"
    terraform_example: |
      resource "aws_s3_bucket_intelligent_tiering_configuration" "example" {
        bucket = aws_s3_bucket.example.id
        name   = "EntireBucket"

        tiering {
          access_tier = "DEEP_ARCHIVE_ACCESS"
          days        = 180
        }

        tiering {
          access_tier = "ARCHIVE_ACCESS"
          days        = 90
        }
      }
    cli_example: |
      aws s3api put-bucket-intelligent-tiering-configuration \
        --bucket my-bucket \
        --id EntireBucket \
        --intelligent-tiering-configuration file://tiering-config.json
    console_steps:
      - "Navigate to S3 in AWS Console"
      - "Select the bucket"
      - "Go to Management tab"
      - "Click Create lifecycle rule"
      - "Enable Intelligent-Tiering"
      - "Configure archive tiers"
      - "Save configuration"
